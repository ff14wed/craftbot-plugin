(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{176:function(t,e,n){t.exports=n(218)},218:function(t,e,n){"use strict";n.r(e);var r=n(11),a=n(14),i=n(21),o=n(20),c=n(24),s=n.n(c),u=n(35),l=n(0),p=n.n(l),b=n(26),f=n.n(b),m=n(22),h=n(108),y=n(10),d=n(4),O=(n(68),n(3)),v=n(122),g=n(78),j=n(8),E=n(29),C=n.n(E);function w(){var t=Object(j.a)(["\n    mutation SendHookData($req: StreamRequest!) {\n      sendStreamRequest(request: $req)\n    }\n  "]);return w=function(){return t},t}function D(){var t=Object(j.a)(["\n    query AllStreams {\n      streams {\n        id\n      }\n    }\n  "]);return D=function(){return t},t}function k(){var t=Object(j.a)(["\n    query GetStream($streamID: Int!) {\n      stream(streamID: $streamID) {\n        ...stream\n      }\n    }\n    ","\n  "]);return k=function(){return t},t}function S(){var t=Object(j.a)(["\n    query Version {\n      apiVersion\n    }\n  "]);return S=function(){return t},t}function I(){var t=Object(j.a)(["\n    subscription Entities {\n      entityEvent {\n        streamID\n        entityID\n        type {\n          __typename\n          ... on AddEntity {\n            entity {\n              ...entity\n            }\n          }\n          ... on RemoveEntity {\n            id\n          }\n          ... on SetEntities {\n            entities {\n              ...entity\n            }\n          }\n          ... on UpdateClass {\n            classJob {\n              ...classJob\n            }\n          }\n          ... on UpdateLastAction {\n            action {\n              ...action\n            }\n          }\n          ... on UpsertStatus {\n            index\n            status {\n              ...status\n            }\n          }\n          ... on RemoveStatus {\n            index\n          }\n          ... on UpdateResources {\n            resources {\n              ...resources\n            }\n          }\n        }\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n  "]);return I=function(){return t},t}function x(){var t=Object(j.a)(["\n    subscription Streams {\n      streamEvent {\n        streamID\n        type {\n          __typename\n          ... on UpdateIDs {\n            characterID\n          }\n          ... on UpdateCraftingInfo {\n            craftingInfo {\n              ...craftingInfo\n            }\n          }\n        }\n      }\n    }\n    ","\n  "]);return x=function(){return t},t}function P(){var t=Object(j.a)(["\n    fragment stream on Stream {\n      id\n      characterID\n      craftingInfo {\n        ...craftingInfo\n      }\n\n      entities {\n        ...entity\n      }\n    }\n    ","\n    ","\n  "]);return P=function(){return t},t}function A(){var t=Object(j.a)(["\n    fragment craftingInfo on CraftingInfo {\n      recipe {\n        id\n        name\n        recipeLevel\n        element\n        canHQ\n        difficulty\n        quality\n        durability\n      }\n\n      lastCraftActionID\n      lastCraftActionName\n      stepNum\n\n      progress\n      progressDelta\n\n      quality\n      qualityDelta\n\n      hqChance\n\n      durability\n      durabilityDelta\n\n      currentCondition\n      previousCondition\n\n      completed\n      failed\n    }\n  "]);return A=function(){return t},t}function N(){var t=Object(j.a)(["\n    fragment entity on Entity {\n      id\n      index\n      name\n      level\n      classJob {\n        ...classJob\n      }\n      resources {\n        ...resources\n      }\n      lastAction {\n        ...action\n      }\n      statuses {\n        ...status\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n  "]);return N=function(){return t},t}function R(){var t=Object(j.a)(["\n    fragment status on Status {\n      id\n      param\n      name\n      description\n      startedTime\n      duration\n      actorID\n      lastTick\n    }\n  "]);return R=function(){return t},t}function L(){var t=Object(j.a)(["\n    fragment action on Action {\n      id\n      name\n      targetID\n      useTime\n    }\n  "]);return L=function(){return t},t}function T(){var t=Object(j.a)(["\n    fragment resources on Resources {\n      mp\n      maxMP\n      lastTick\n    }\n  "]);return T=function(){return t},t}function q(){var t=Object(j.a)(["\n    fragment classJob on ClassJob {\n      id\n      name\n      abbreviation\n    }\n  "]);return q=function(){return t},t}var z,H,U,_,F,J,M,Q,G,Y,V,K,B,X,$,W,Z,tt,et,nt,rt,at,it,ot,ct=new function t(){Object(r.a)(this,t),this.classJobFragment=C()(q()),this.resourcesFragment=C()(T()),this.actionFragment=C()(L()),this.statusFragment=C()(R()),this.entityFragment=C()(N(),this.classJobFragment,this.resourcesFragment,this.actionFragment,this.statusFragment),this.craftingInfoFragment=C()(A()),this.streamFragment=C()(P(),this.entityFragment,this.craftingInfoFragment),this.streamSubscription=C()(x(),this.craftingInfoFragment),this.entitySubscription=C()(I(),this.entityFragment,this.classJobFragment,this.actionFragment,this.statusFragment,this.resourcesFragment),this.versionQuery=C()(S()),this.streamQuery=C()(k(),this.streamFragment),this.listStreamsQuery=C()(D()),this.hookMutation=C()(w())},st=n(23),ut=n(123),lt=n(112),pt=n(109),bt=Object(pt.a)(function(t){var e=t.graphQLErrors,n=t.networkError;e&&e.map(function(t){var e=t.message,n=t.locations,r=t.path;return console.log("[GraphQL error]: Message: ".concat(e,", Location: ").concat(n,", Path: ").concat(r))}),n&&console.log("[Network error]: ".concat(n))}),ft=function(t,e){return new Promise(function(n,r){Object(st.d)(Object(st.b)(t,e)).then(function(t){t.data?n(t.data):r(t.errors)}).catch(function(t){return r(t)})})},mt=function t(e,n){var a=this;Object(r.a)(this,t),this.httpLink=void 0,this.wsLink=void 0,this.getAPIVersion=Object(u.a)(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft(a.httpLink,{query:ct.versionQuery});case 2:return e=t.sent,t.abrupt("return",e.apiVersion);case 4:case"end":return t.stop()}},t)})),this.listStreams=Object(u.a)(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft(a.httpLink,{query:ct.listStreamsQuery});case 2:return e=t.sent,t.abrupt("return",e.streams);case 4:case"end":return t.stop()}},t)})),this.getStream=function(){var t=Object(u.a)(s.a.mark(function t(e){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={streamID:e},t.next=3,ft(a.httpLink,{query:ct.streamQuery,variables:n});case 3:return r=t.sent,t.abrupt("return",r.stream);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),this.subscribeToStreamEvents=function(t,e){return Object(st.b)(a.wsLink,{query:ct.streamSubscription}).subscribe({next:function(n){if(n.data){var r=n.data.streamEvent;if(r.streamID===t){var a=r.type,i=a.__typename,o=Object(g.a)(a,["__typename"]);e(i,o)}}}})},this.subscribeToEntityEvents=function(t,e){return Object(st.b)(a.wsLink,{query:ct.entitySubscription}).subscribe({next:function(n){if(n.data){var r=n.data.entityEvent;if(r.streamID===t){var a=r.entityID,i=r.type,o=i.__typename,c=Object(g.a)(i,["__typename"]);e(a,o,c)}}}})};var i=n?{headers:{Authorization:n}}:{},o=n?function(){return{authorization:n}}:void 0;this.httpLink=st.a.from([bt,new ut.a(Object(v.a)({uri:e},i))]),this.wsLink=st.a.from([bt,new lt.a({uri:e.replace("http://","ws://"),options:{reconnect:!0,connectionParams:o}})])},ht=n(47),yt=(z=function(){function t(e){var n=this;Object(r.a)(this,t),this.id=0,this.index=-1,this.name="",Object(y.a)(this,"level",H,this),Object(y.a)(this,"classJob",U,this),Object(y.a)(this,"resources",_,this),Object(y.a)(this,"lastAction",F,this),Object(y.a)(this,"statuses",J,this);var a=e.id,i=e.index,o=e.name,c=e.level,s=e.lastAction;Object.assign(this,{id:a,index:i,name:o,level:c,lastAction:s}),this.classJob=e.classJob,this.resources=e.resources,e.statuses.forEach(function(t,e){t&&(n.statuses[e]=t)})}return Object(a.a)(t,[{key:"handleEntityEvent",value:function(t,e){switch(t){case"UpdateClass":this.classJob=e.classJob;break;case"UpdateLastAction":this.lastAction=e.action;break;case"UpsertStatus":this.statuses[e.index]=e.status;break;case"RemoveStatus":delete this.statuses[e.index];break;case"UpdateResources":this.resources=e.resources}}},{key:"lastActionName",get:function(){return this.lastAction?this.lastAction.name:""}},{key:"cp",get:function(){return this.resources.mp}},{key:"maxCP",get:function(){return this.resources.maxMP}},{key:"displayStatusList",get:function(){var t=[];return Object.entries(this.statuses).forEach(function(e){var n=Object(ht.a)(e,2),r=(n[0],n[1]),a="".concat(r.name);r.param&&(a="".concat(a," (").concat(r.param,")")),t.push(a)}),JSON.stringify(t)}}]),t}(),H=Object(d.a)(z.prototype,"level",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),U=Object(d.a)(z.prototype,"classJob",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=Object(d.a)(z.prototype,"resources",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=Object(d.a)(z.prototype,"lastAction",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=Object(d.a)(z.prototype,"statuses",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(d.a)(z.prototype,"handleEntityEvent",[O.f],Object.getOwnPropertyDescriptor(z.prototype,"handleEntityEvent"),z.prototype),Object(d.a)(z.prototype,"lastActionName",[O.g],Object.getOwnPropertyDescriptor(z.prototype,"lastActionName"),z.prototype),Object(d.a)(z.prototype,"cp",[O.g],Object.getOwnPropertyDescriptor(z.prototype,"cp"),z.prototype),Object(d.a)(z.prototype,"maxCP",[O.g],Object.getOwnPropertyDescriptor(z.prototype,"maxCP"),z.prototype),Object(d.a)(z.prototype,"displayStatusList",[O.g],Object.getOwnPropertyDescriptor(z.prototype,"displayStatusList"),z.prototype),z),dt=n(42),Ot=n.n(dt),vt=n(65),gt=n.n(vt);function jt(t){return t>=0?"(+".concat(t,")"):"(".concat(t,")")}function Et(t){switch(t){case 1:return"Normal";case 2:return"Good";case 3:return"Excellent";case 4:return"Poor";case 5:return"Centered";case 6:return"Sturdy";case 7:return"Pliant";case 8:return"Malleable";case 9:return"Primed"}return console.log("Unknown condition:",t),"Unknown"}Ot.a.extend(gt.a);var Ct,wt,Dt,kt,St,It,xt,Pt,At=(M=function(){function t(e){Object(r.a)(this,t),this.date=0,this.recipe=void 0,Object(y.a)(this,"history",Q,this),Object(y.a)(this,"stepNum",G,this),Object(y.a)(this,"cp",Y,this),Object(y.a)(this,"maxCP",V,this),Object(y.a)(this,"durability",K,this),Object(y.a)(this,"durabilityDelta",B,this),Object(y.a)(this,"progress",X,this),Object(y.a)(this,"progressDelta",$,this),Object(y.a)(this,"quality",W,this),Object(y.a)(this,"qualityDelta",Z,this),Object(y.a)(this,"hqChance",tt,this),Object(y.a)(this,"previousCondition",et,this),Object(y.a)(this,"currentCondition",nt,this),Object(y.a)(this,"lastCraftActionID",rt,this),Object(y.a)(this,"lastCraftActionName",at,this),Object(y.a)(this,"completed",it,this),Object(y.a)(this,"failed",ot,this);var n=e.recipe,a=e.stepNum,i=e.currentCondition,o=e.previousCondition,c=e.durability;this.recipe=n,this.stepNum=a,this.currentCondition=i,this.previousCondition=o,this.durability=c,this.date=Date.now()}return Object(a.a)(t,[{key:"craftingEvent",value:function(t){if(!(t.lastCraftActionID<=0)){this.stepNum=t.stepNum,this.durability=t.durability,this.durabilityDelta=t.durabilityDelta,this.progress=t.progress,this.progressDelta=t.progressDelta,this.quality=t.quality,this.qualityDelta=t.qualityDelta,this.hqChance=t.hqChance,this.previousCondition=t.previousCondition,this.currentCondition=t.currentCondition,this.lastCraftActionID=t.lastCraftActionID,this.lastCraftActionName=t.lastCraftActionName,this.completed=t.completed,this.failed=t.failed;var e=Object.assign({},this.info);e.id="".concat(Date.now()),this.history.push(e)}}},{key:"updateCP",value:function(t,e){this.cp=t,this.maxCP=e}},{key:"id",get:function(){return Ot()(this.date).format()}},{key:"timestamp",get:function(){return Ot()(this.date).format("l h:mm:ss a")}},{key:"numSteps",get:function(){return this.history.length}},{key:"condition",get:function(){return Et(this.currentCondition)}},{key:"info",get:function(){return{id:this.id,RecipeID:this.recipe.id,RecipeName:this.recipe.name,RecipeLevel:this.recipe.recipeLevel,StepNum:this.stepNum,CP:"".concat(this.cp," / ").concat(this.maxCP),Durability:"".concat(this.durability," / ").concat(this.recipe.durability," ").concat(jt(this.durabilityDelta)),Progress:"".concat(this.progress," / ").concat(this.recipe.difficulty," ").concat(jt(this.progressDelta)),Quality:"".concat(this.quality," / ").concat(this.recipe.quality," ").concat(jt(this.qualityDelta)),HQChance:"".concat(this.hqChance,"%"),PreviousCondition:Et(this.previousCondition),CurrentCondition:Et(this.currentCondition),LastCraftAction:"".concat(this.lastCraftActionName," (").concat(this.lastCraftActionID,")"),Completed:"".concat(this.completed),Failed:"".concat(this.failed)}}}]),t}(),Q=Object(d.a)(M.prototype,"history",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=Object(d.a)(M.prototype,"stepNum",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Y=Object(d.a)(M.prototype,"cp",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),V=Object(d.a)(M.prototype,"maxCP",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),K=Object(d.a)(M.prototype,"durability",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),B=Object(d.a)(M.prototype,"durabilityDelta",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),X=Object(d.a)(M.prototype,"progress",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$=Object(d.a)(M.prototype,"progressDelta",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),W=Object(d.a)(M.prototype,"quality",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=Object(d.a)(M.prototype,"qualityDelta",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tt=Object(d.a)(M.prototype,"hqChance",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),et=Object(d.a)(M.prototype,"previousCondition",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),nt=Object(d.a)(M.prototype,"currentCondition",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),rt=Object(d.a)(M.prototype,"lastCraftActionID",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),at=Object(d.a)(M.prototype,"lastCraftActionName",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),it=Object(d.a)(M.prototype,"completed",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ot=Object(d.a)(M.prototype,"failed",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(d.a)(M.prototype,"craftingEvent",[O.f],Object.getOwnPropertyDescriptor(M.prototype,"craftingEvent"),M.prototype),Object(d.a)(M.prototype,"updateCP",[O.f],Object.getOwnPropertyDescriptor(M.prototype,"updateCP"),M.prototype),Object(d.a)(M.prototype,"id",[O.g],Object.getOwnPropertyDescriptor(M.prototype,"id"),M.prototype),Object(d.a)(M.prototype,"timestamp",[O.g],Object.getOwnPropertyDescriptor(M.prototype,"timestamp"),M.prototype),Object(d.a)(M.prototype,"numSteps",[O.g],Object.getOwnPropertyDescriptor(M.prototype,"numSteps"),M.prototype),Object(d.a)(M.prototype,"condition",[O.g],Object.getOwnPropertyDescriptor(M.prototype,"condition"),M.prototype),Object(d.a)(M.prototype,"info",[O.g],Object.getOwnPropertyDescriptor(M.prototype,"info"),M.prototype),M),Nt=n(114),Rt=n.n(Nt),Lt={streamStore:null},Tt=new(Ct=function(){function t(){Object(r.a)(this,t),Object(y.a)(this,"loading",wt,this),Object(y.a)(this,"error",Dt,this),this.gqlClient=void 0,this.streamID=0,this.apiURL="",Object(y.a)(this,"craftHistory",kt,this),Object(y.a)(this,"selectedCraftID",St,this),Object(y.a)(this,"currentCraftID",It,this),Object(y.a)(this,"entities",xt,this),Object(y.a)(this,"characterID",Pt,this)}return Object(a.a)(t,[{key:"initialize",value:function(){var t=Object(u.a)(s.a.mark(function t(e){var n,r,a,i,o,c,u,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.gqlClient=new mt(e.apiURL,e.apiToken),t.next=3,this.gqlClient.getAPIVersion();case 3:if(n=t.sent,Rt.a.satisfies(n,">=0.3.1",{includePrerelease:!0})){t.next=7;break}return this.error="Your version of Aetherometer is no longer supported by this plugin. Please update to a newer version.",t.abrupt("return");case 7:return t.next=9,this.getActiveStreamID(e);case 9:if(r=this.streamID=t.sent,this.subscribeToStreamEvents(),this.subscribeToEntityEvents(),r){t.next=15;break}return this.error="Stream ID not found!",t.abrupt("return");case 15:return t.next=17,this.gqlClient.getStream(r);case 17:a=t.sent,i=a.entities,o=a.characterID,this.characterID=o,c=Object(h.a)(i);try{for(c.s();!(u=c.n()).done;)l=u.value,this.entities.set(l.id,new yt(l))}catch(s){c.e(s)}finally{c.f()}this.loading=!1;case 23:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getActiveStreamID",value:function(){var t=Object(u.a)(s.a.mark(function t(e){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.streamID){t.next=4;break}return t.abrupt("return",e.streamID);case 4:return t.next=6,this.gqlClient.listStreams();case 6:if(!((n=t.sent).length>0)){t.next=9;break}return t.abrupt("return",n[0].id);case 9:return t.abrupt("return",0);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"subscribeToStreamEvents",value:function(){var t=this;return this.gqlClient.subscribeToStreamEvents(this.streamID,Object(O.f)(function(e,n){if(!t.loading)switch(e){case"UpdateIDs":t.characterID=n.characterID;break;case"UpdateCraftingInfo":if(n.craftingInfo)if(t.currentCraft)t.currentCraft.craftingEvent(n.craftingInfo);else{var r=new At(n.craftingInfo);t.craftHistory.set(r.id,r),t.currentCraftID=r.id}else t.currentCraftID="";var a=t.characterEntity;t.currentCraft&&a&&t.currentCraft.updateCP(a.cp,a.maxCP)}}))}},{key:"subscribeToEntityEvents",value:function(){var t=this;return this.gqlClient.subscribeToEntityEvents(this.streamID,Object(O.f)(function(e,n,r){t.loading||("AddEntity"!==n?"RemoveEntity"!==n?"SetEntities"!==n?t.characterEntity&&e===t.characterEntity.id&&t.characterEntity.handleEntityEvent(n,r):t.setEntities(r.entities):t.removeEntity(r.id):t.addEntity(r.entity))}))}},{key:"addEntity",value:function(t){this.entities.set(t.id,new yt(t))}},{key:"removeEntity",value:function(t){this.entities.delete(t)}},{key:"setEntities",value:function(t){var e=this;this.entities.clear(),t.forEach(function(t){e.addEntity(t)})}},{key:"setSelectedCraftID",value:function(t){this.selectedCraftID=t}},{key:"downloadHistory",value:function(){var t=Object(u.a)(s.a.mark(function t(){var e,n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=JSON.stringify(this.craftHistory,null,4),n=window.URL.createObjectURL(new Blob([e])),(r=document.createElement("a")).style.display="none",r.href=n,r.download="craftlog-".concat((new Date).toISOString(),".json"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),r.remove();case 10:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"characterEntity",get:function(){return this.entities.get(this.characterID)}},{key:"selectedCraft",get:function(){return this.craftHistory.has(this.selectedCraftID)?this.craftHistory.get(this.selectedCraftID):null}},{key:"currentCraft",get:function(){return this.craftHistory.get(this.currentCraftID)}}]),t}(),wt=Object(d.a)(Ct.prototype,"loading",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Dt=Object(d.a)(Ct.prototype,"error",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kt=Object(d.a)(Ct.prototype,"craftHistory",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),St=Object(d.a)(Ct.prototype,"selectedCraftID",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),It=Object(d.a)(Ct.prototype,"currentCraftID",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),xt=Object(d.a)(Ct.prototype,"entities",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Pt=Object(d.a)(Ct.prototype,"characterID",[O.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(d.a)(Ct.prototype,"initialize",[O.f],Object.getOwnPropertyDescriptor(Ct.prototype,"initialize"),Ct.prototype),Object(d.a)(Ct.prototype,"subscribeToStreamEvents",[O.f],Object.getOwnPropertyDescriptor(Ct.prototype,"subscribeToStreamEvents"),Ct.prototype),Object(d.a)(Ct.prototype,"subscribeToEntityEvents",[O.f],Object.getOwnPropertyDescriptor(Ct.prototype,"subscribeToEntityEvents"),Ct.prototype),Object(d.a)(Ct.prototype,"addEntity",[O.f],Object.getOwnPropertyDescriptor(Ct.prototype,"addEntity"),Ct.prototype),Object(d.a)(Ct.prototype,"removeEntity",[O.f],Object.getOwnPropertyDescriptor(Ct.prototype,"removeEntity"),Ct.prototype),Object(d.a)(Ct.prototype,"setEntities",[O.f],Object.getOwnPropertyDescriptor(Ct.prototype,"setEntities"),Ct.prototype),Object(d.a)(Ct.prototype,"setSelectedCraftID",[O.f],Object.getOwnPropertyDescriptor(Ct.prototype,"setSelectedCraftID"),Ct.prototype),Object(d.a)(Ct.prototype,"characterEntity",[O.g],Object.getOwnPropertyDescriptor(Ct.prototype,"characterEntity"),Ct.prototype),Object(d.a)(Ct.prototype,"selectedCraft",[O.g],Object.getOwnPropertyDescriptor(Ct.prototype,"selectedCraft"),Ct.prototype),Object(d.a)(Ct.prototype,"currentCraft",[O.g],Object.getOwnPropertyDescriptor(Ct.prototype,"currentCraft"),Ct.prototype),Ct),qt=n(6),zt=n(19);n(82);function Ht(){var t=Object(j.a)(["\n  padding: 20px;\n  margin: 20px;\n  && {\n    background-color: ",";\n  }\n"]);return Ht=function(){return t},t}var Ut=Object(zt.a)(qt.Card)(Ht(),qt.Colors.DARK_GRAY2);function _t(){var t=Object(j.a)(["\n  margin: 5px 0px;\n  flex: 0 0 auto;\n  margin-left: 5px;\n  flex-basis: 120px;\n"]);return _t=function(){return t},t}function Ft(){var t=Object(j.a)(["\n  flex: 1 0 auto;\n  margin-right: 5px;\n"]);return Ft=function(){return t},t}function Jt(){var t=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Jt=function(){return t},t}var Mt=zt.a.div(Jt()),Qt=zt.a.div(Ft()),Gt=zt.a.div(_t()),Yt=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props,e=t.current,n=t.max,r=t.color,a=e/n*100;return isNaN(a)&&(a=100),p.a.createElement(Mt,null,p.a.createElement(Qt,{style:{color:r}},e,"/",n),p.a.createElement(Gt,null,p.a.createElement("div",{className:"".concat(qt.Classes.PROGRESS_BAR," ").concat(qt.Classes.PROGRESS_NO_ANIMATION)},p.a.createElement("div",{className:qt.Classes.PROGRESS_METER,style:{backgroundColor:r,width:"".concat(a,"%")}}))))}}]),n}(l.Component);function Vt(){var t=Object(j.a)(["\n  display: grid;\n  grid-row-gap: 5px;\n  grid-column-gap: 10px;\n  grid-template-columns: max-content auto;\n  grid-auto-rows: minmax(18px, auto);\n"]);return Vt=function(){return t},t}Ot.a.extend(gt.a);var Kt,Bt,Xt,$t=zt.a.div(Vt()),Wt=function(t){return p.a.createElement("div",{className:"".concat(qt.Classes.TEXT_MUTED," ").concat(qt.Classes.TEXT_SMALL)},t.children)},Zt=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=[];return Object.entries(this.props.infos).forEach(function(e){var r=Object(ht.a)(e,2),a=r[0],i=r[1],o=typeof i;"number"===o||"string"===o||p.a.isValidElement(i)||(i=i?p.a.createElement(n,{infos:i}):p.a.createElement("div",null)),"lastUpdated"!==a&&"lastTick"!==a&&"startedTime"!==a&&"useTime"!==a||(i=Ot()(i).format("L HH:mm:ss.SSS")),t.push(p.a.createElement(Wt,{key:"".concat(a,"-name")},a)),t.push(p.a.createElement("div",{key:"".concat(a,"-info")},i))}),p.a.createElement($t,null,t)}}]),n}(l.Component);function te(){var t=Object(j.a)(["\n  height: 340px;\n"]);return te=function(){return t},t}var ee,ne,re,ae,ie,oe,ce,se=zt.a.div(te()),ue=Object(m.b)("streamStore")(Kt=Object(m.c)((Xt=Bt=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props.streamStore,e=t.characterEntity,n=t.currentCraft,r=p.a.createElement(se,null,p.a.createElement(qt.NonIdealState,{icon:"build",title:"No crafting in progress",description:"Start a craft to see current details on the crafting state."}));if(!e)return p.a.createElement(Ut,{elevation:qt.Elevation.THREE},p.a.createElement(se,null,p.a.createElement(qt.NonIdealState,{icon:"user",title:"No character detected",description:"Please rezone or log in to see the state of your current character."})));var a=e.level,i=e.cp,o=e.maxCP,c=e.lastActionName,s=e.displayStatusList,u={Level:a,CP:p.a.createElement(Yt,{current:i,max:o,color:qt.Colors.GOLD3}),LastAction:c,Statuses:s,CurrentCraft:n&&n.info||r};return p.a.createElement(Ut,{elevation:qt.Elevation.THREE},p.a.createElement(Zt,{infos:u}))}}]),n}(l.Component),Bt.defaultProps=Lt,Kt=Xt))||Kt)||Kt,le="".concat(qt.Classes.TEXT_SMALL," ").concat(qt.Classes.TEXT_MUTED),pe=Object(m.c)(ee=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).onClick=function(){t.props.onSelect(t.props.craft.id)},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props,e=t.craft,n=t.selected,r=p.a.createElement("div",null,p.a.createElement("span",null,e.recipe.name," "),p.a.createElement("span",{className:le},"(",e.numSteps," steps) - ",e.timestamp),!e.failed&&e.completed&&p.a.createElement("span",{className:le}," COMPLETED"),e.failed&&p.a.createElement("span",{className:le}," FAILED"));return p.a.createElement(qt.MenuItem,{text:r,active:n,onClick:this.onClick})}}]),n}(l.Component))||ee;function be(){var t=Object(j.a)(["\n  list-style: none;\n  padding: 0;\n  max-height: 30vh;\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 5px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: ",";\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: ",";\n  }\n"]);return be=function(){return t},t}var fe,me,he,ye=Object(zt.a)(qt.UL)(be(),qt.Colors.GRAY1,qt.Colors.DARK_GRAY5),de=Object(m.b)("streamStore")(ie=Object(m.c)((ce=oe=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).downloadHistory=function(){t.props.streamStore.downloadHistory()},t}return Object(a.a)(n,[{key:"render",value:function(){return p.a.createElement(Ut,{elevation:qt.Elevation.THREE},p.a.createElement(qt.H5,null,"Craft Histories"),p.a.createElement(qt.Button,{onClick:this.downloadHistory},"Download History"),p.a.createElement(Oe,null))}}]),n}(l.Component),oe.defaultProps=Lt,ie=ce))||ie)||ie,Oe=Object(m.b)("streamStore")(ne=Object(m.c)((ae=re=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))).onSelect=function(e){t.props.streamStore.setSelectedCraftID(e)},t}return Object(a.a)(n,[{key:"render",value:function(){var t=this,e=this.props.streamStore,n=e.craftHistory,r=e.selectedCraft;return p.a.createElement(ye,null,Array.from(n).reverse().map(function(e){var n=Object(ht.a)(e,2),a=(n[0],n[1]);return p.a.createElement(pe,{key:a.id,craft:a,selected:a===r,onSelect:t.onSelect})}))}}]),n}(l.Component),re.defaultProps=Lt,ne=ae))||ne)||ne;function ve(){var t=Object(j.a)(["\n  flex: 1 0 auto;\n"]);return ve=function(){return t},t}function ge(){var t=Object(j.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return ge=function(){return t},t}function je(){var t=Object(j.a)(["\n  height: 400px;\n"]);return je=function(){return t},t}var Ee=zt.a.div(je()),Ce=zt.a.div(ge()),we=zt.a.div(ve()),De=Object(m.b)("streamStore")(fe=Object(m.c)((he=me=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var t=this.props.streamStore.selectedCraft;return t?p.a.createElement(Ut,{elevation:qt.Elevation.THREE},p.a.createElement(Ce,null,p.a.createElement(we,null,p.a.createElement(Zt,{infos:t.info})),p.a.createElement(we,null,p.a.createElement(qt.HTMLTable,{condensed:!0,interactive:!0,striped:!0},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,"Step"),p.a.createElement("th",null,"CP"),p.a.createElement("th",null,"Durability"),p.a.createElement("th",null,"Progress"),p.a.createElement("th",null,"Quality"),p.a.createElement("th",null,"HQ %"),p.a.createElement("th",null,"Condition"),p.a.createElement("th",null,"Action"))),p.a.createElement("tbody",null,t.history.map(function(t){return p.a.createElement("tr",{key:t.id},p.a.createElement("th",null,t.StepNum-1),p.a.createElement("th",null,t.CP),p.a.createElement("th",null,t.Durability),p.a.createElement("th",null,t.Progress),p.a.createElement("th",null,t.Quality),p.a.createElement("th",null,t.HQChance),p.a.createElement("th",null,t.PreviousCondition),p.a.createElement("th",null,t.LastCraftAction," "))})))))):p.a.createElement(Ut,{elevation:qt.Elevation.THREE},p.a.createElement(Ee,null,p.a.createElement(qt.NonIdealState,{icon:"list",title:"No craft history selected",description:"Select a craft history to view it."})))}}]),n}(l.Component),me.defaultProps=Lt,fe=he))||fe)||fe;function ke(){var t=Object(j.a)(["\n  background-color: ",";\n  height: 100vh;\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 5px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: ",";\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: ",";\n  }\n"]);return ke=function(){return t},t}var Se=zt.a.div(ke(),qt.Colors.DARK_GRAY3,qt.Colors.GRAY1,qt.Colors.DARK_GRAY5),Ie=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return l.createElement(Se,{className:"bp3-dark"},l.createElement(ue,null),l.createElement(de,null),l.createElement(De,null))}}]),n}(l.Component);function xe(){var t=Object(j.a)(["\n  background-color: ",";\n  min-height: 100vh;\n  height: 100vh;\n  margin: auto;\n"]);return xe=function(){return t},t}var Pe,Ae,Ne,Re=zt.a.div(xe(),qt.Colors.DARK_GRAY3),Le=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return this.props.error?p.a.createElement(Re,{className:"bp3-dark"},p.a.createElement(qt.NonIdealState,{icon:"warning-sign",title:this.props.error})):p.a.createElement(Re,{className:"bp3-dark"},p.a.createElement(qt.NonIdealState,{icon:p.a.createElement(qt.Spinner,{intent:"primary"}),title:"Loading..."}))}}]),n}(l.Component),Te=function(){var t=Object(u.a)(s.a.mark(function t(){var e,n,r,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.waitForInit){t.next=2;break}return t.abrupt("return",new Promise(function(t){window.initPlugin=function(e){t(e)}}));case 2:return e=new URLSearchParams(window.location.search),n=e.get("apiURL")||"http://localhost:8080/query",r=e.get("apiToken")||void 0,a=void 0,e.has("streamID")&&(a=parseInt(e.get("streamID"))),t.abrupt("return",{apiURL:n,apiToken:r,streamID:a});case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),qe=Object(m.b)("streamStore")(Pe=Object(m.c)((Ne=Ae=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var t=this;Te().then(function(e){t.props.streamStore.initialize(e)})}},{key:"render",value:function(){var t=this.props.streamStore,e=t.loading,n=t.error;return e?p.a.createElement(Le,{error:n}):p.a.createElement(Ie,null)}}]),n}(l.Component),Ae.defaultProps=Lt,Pe=Ne))||Pe)||Pe,ze=function(){return p.a.createElement(m.a,{streamStore:Tt},p.a.createElement(qe,null))};f.a.render(p.a.createElement(ze,null),document.getElementById("root"))},82:function(t,e,n){}},[[176,1,2]]]);
//# sourceMappingURL=main.6afdaea7.chunk.js.map